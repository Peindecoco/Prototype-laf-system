<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin | FEU Lost & Found</title>

  <link rel="icon" type="image/x-icon" img src="https://res.cloudinary.com/do7rjbs6t/image/upload/v1770720259/web_icon_wmszef.png">
  <link rel="stylesheet" href="common.css">
  <link rel="stylesheet" href="report_sheet.css">
</head>

<body>
  <div class="container">

    <!-- HEADER -->
    <header>
        <img src="https://res.cloudinary.com/do7rjbs6t/image/upload/v1770720253/feu_hs_logo_fg00jy.png" alt="" class="title-img">
        <img src="https://res.cloudinary.com/do7rjbs6t/image/upload/v1770720254/feu_hs_laf_azlujs.png" alt="" class="title-text">
    </header>

    <!-- NAVIGATION -->
    <nav>
      <a href="index.html"><span class="gold-text">01</span> HOME</a>
      <a href="report.html"><span class="gold-text">02</span> REPORT</a>
      <a href="#"><span class="gold-text">03</span> HELP</a>
    </nav>

    <!-- MAIN CONTENT -->
    <div class="main-admin">
      <div class="report-sheet-admin">
        <h1>Admin | Add Found Item</h1>

        <form class="report-form" id="adminForm" enctype="multipart/form-data">

          <input name="adminSecret" placeholder="Admin Secret" required>

          <input name="name" placeholder="Item Name" required>
          <input name="description" placeholder="Description" required>
          <input name="color" placeholder="Color">
          <input name="size" placeholder="Size">
          <input name="shape" placeholder="Shape">
          <input name="locationFound" placeholder="Location Found">
          <input name="secretDetail" placeholder="Secret Detail (owner-only identifier)" required>

          <input type="file" name="image" accept="image/*">
          <p style="margin:0 0 10px; font-size:12px; color:#555;">Tip: Add a strong secret detail (engraving, exact contents, hidden marks) for more accurate claim checking.</p>

          <button type="submit" class="btn">Submit</button>
        </form>

        <p id="msg"></p>
      </div>
    </div>

    <!-- FOOTER -->
    <footer>
      <div class="footer-content">
        <p>&copy; 2026 FEU High School Lost and Found</p>
        <p>Powered by FEU Tech Team</p>
      </div>
    </footer>

  </div>

  <!-- SCRIPT -->
  <script>
    const form = document.getElementById('adminForm');
    const msg = document.getElementById('msg');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      msg.textContent = '';

      const formData = new FormData(form);

      try {
        const res = await fetch('/api/admin/add-found', {
          method: 'POST',
          body: formData
        });

        const json = await res.json();

        if (res.ok) {
          msg.textContent = json.message || 'Item added successfully';
          form.reset();
        } else {
          msg.textContent = json.error || json.message || 'Upload failed';
        }
      } catch (err) {
        msg.textContent = 'Error: ' + err.message;
      }
    });
  </script>

</body>
</html>
